# Nixpacks configuration for Railway deployment
# See: https://nixpacks.com/docs/configuration/file

[phases.setup]
aptPkgs = ["imagemagick", "ffmpeg", "libvips-dev", "pdftk", "wkhtmltopdf", "libyaml-dev", "libssl-dev", "libreadline-dev", "zlib1g-dev"]

[phases.install]
cmds = [
    "bundle install",
    "npm install"
]

[phases.build]
cmds = [
    "bundle exec rails assets:precompile"
]

[start]
cmd = "bundle exec puma -C config/puma.rb"
