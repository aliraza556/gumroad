# Nixpacks configuration for Railway deployment
# See: https://nixpacks.com/docs/configuration/file

[phases.setup]
nixPkgs = [
    "nodejs-20_x",
    "ruby_3_4",
    "imagemagick",
    "ffmpeg",
    "vips",
    "wkhtmltopdf"
]
aptPkgs = ["pdftk"]

[phases.install]
cmds = [
    "bundle install",
    "npm install"
]

[phases.build]
cmds = [
    "bundle exec rails assets:precompile"
]

[start]
cmd = "bundle exec puma -C config/puma.rb"
